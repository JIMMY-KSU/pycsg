<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>csg.CSG &mdash; pycsg 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pycsg 0.1 documentation" href="index.html" />
    <link rel="prev" title="Welcome to pycsg’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="Welcome to pycsg’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pycsg 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="csg-csg">
<h1><tt class="docutils literal"><span class="pre">csg.CSG</span></tt><a class="headerlink" href="#csg-csg" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="csg.CSG">
<em class="property">class </em><tt class="descclassname">csg.</tt><tt class="descname">CSG</tt><a class="headerlink" href="#csg.CSG" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Constructive Solid Geometry (CSG) is a modeling technique that uses Boolean
operations like union and intersection to combine 3D solids. This library
implements CSG operations on meshes elegantly and concisely using BSP trees,
and is meant to serve as an easily understandable implementation of the
algorithm. All edge cases involving overlapping coplanar polygons in both
solids are correctly handled.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cube</span> <span class="o">=</span> <span class="n">CSG</span><span class="o">.</span><span class="n">cube</span><span class="p">();</span>
<span class="n">sphere</span> <span class="o">=</span> <span class="n">CSG</span><span class="o">.</span><span class="n">sphere</span><span class="p">({</span><span class="s">&#39;radius&#39;</span><span class="p">:</span> <span class="mf">1.3</span><span class="p">});</span>
<span class="n">polygons</span> <span class="o">=</span> <span class="n">cube</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span><span class="o">.</span><span class="n">toPolygons</span><span class="p">();</span>
</pre></div>
</div>
<p>## Implementation Details</p>
<p>All CSG operations are implemented in terms of two functions, <cite>clipTo()</cite> and
<cite>invert()</cite>, which remove parts of a BSP tree inside another BSP tree and swap
solid and empty space, respectively. To find the union of <cite>a</cite> and <cite>b</cite>, we
want to remove everything in <cite>a</cite> inside <cite>b</cite> and everything in <cite>b</cite> inside <cite>a</cite>,
then combine polygons from <cite>a</cite> and <cite>b</cite> into one solid:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span><span class="o">.</span><span class="n">clipTo</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
<span class="n">b</span><span class="o">.</span><span class="n">clipTo</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="n">a</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">allPolygons</span><span class="p">());</span>
</pre></div>
</div>
<p>The only tricky part is handling overlapping coplanar polygons in both trees.
The code above keeps both copies, but we need to keep them in one tree and
remove them in the other tree. To remove them from <cite>b</cite> we can clip the
inverse of <cite>b</cite> against <cite>a</cite>. The code for union now looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span><span class="o">.</span><span class="n">clipTo</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
<span class="n">b</span><span class="o">.</span><span class="n">clipTo</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="n">b</span><span class="o">.</span><span class="n">invert</span><span class="p">();</span>
<span class="n">b</span><span class="o">.</span><span class="n">clipTo</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="n">b</span><span class="o">.</span><span class="n">invert</span><span class="p">();</span>
<span class="n">a</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">allPolygons</span><span class="p">());</span>
</pre></div>
</div>
<p>Subtraction and intersection naturally follow from set operations. If
union is <cite>A | B</cite>, subtraction is <cite>A - B = ~(~A | B)</cite> and intersection is
<cite>A &amp; B = ~(~A | ~B)</cite> where <cite>~</cite> is the complement operator.</p>
<p>## License</p>
<p>Copyright (c) 2011 Evan Wallace (<a class="reference external" href="http://madebyevan.com/">http://madebyevan.com/</a>), under the MIT license.</p>
<p>Python port Copyright (c) 2012 Tim Knip (<a class="reference external" href="http://www.floorplanner.com">http://www.floorplanner.com</a>), under the MIT license.</p>
<dl class="method">
<dt id="csg.CSG.clone">
<tt class="descname">clone</tt><big>(</big><big>)</big><a class="headerlink" href="#csg.CSG.clone" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="csg.CSG.cube">
<em class="property">classmethod </em><tt class="descname">cube</tt><big>(</big><em>center=[0, 0, 0], radius=[1, 1, 1]</em><big>)</big><a class="headerlink" href="#csg.CSG.cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an axis-aligned solid cuboid. Optional parameters are <cite>center</cite> and
<cite>radius</cite>, which default to <cite>[0, 0, 0]</cite> and <cite>[1, 1, 1]</cite>. The radius can be
specified using a single number or a list of three numbers, one for each axis.</p>
<p>Example code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cube</span> <span class="o">=</span> <span class="n">CSG</span><span class="o">.</span><span class="n">cube</span><span class="p">(</span>
  <span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="n">radius</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="csg.CSG.fromPolygons">
<em class="property">classmethod </em><tt class="descname">fromPolygons</tt><big>(</big><em>polygons</em><big>)</big><a class="headerlink" href="#csg.CSG.fromPolygons" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="csg.CSG.intersect">
<tt class="descname">intersect</tt><big>(</big><em>csg</em><big>)</big><a class="headerlink" href="#csg.CSG.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new CSG solid representing space both this solid and in the
solid <cite>csg</cite>. Neither this solid nor the solid <cite>csg</cite> are modified.:</p>
<div class="highlight-python"><pre>A.intersect(B)

+-------+
|       |
|   A   |
|    +--+----+   =   +--+
+----+--+    |       +--+
     |   B   |
     |       |
     +-------+</pre>
</div>
</dd></dl>

<dl class="method">
<dt id="csg.CSG.inverse">
<tt class="descname">inverse</tt><big>(</big><big>)</big><a class="headerlink" href="#csg.CSG.inverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new CSG solid with solid and empty space switched. This solid is
not modified.</p>
</dd></dl>

<dl class="method">
<dt id="csg.CSG.subtract">
<tt class="descname">subtract</tt><big>(</big><em>csg</em><big>)</big><a class="headerlink" href="#csg.CSG.subtract" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new CSG solid representing space in this solid but not in the
solid <cite>csg</cite>. Neither this solid nor the solid <cite>csg</cite> are modified.:</p>
<div class="highlight-python"><pre>A.subtract(B)

+-------+            +-------+
|       |            |       |
|   A   |            |       |
|    +--+----+   =   |    +--+
+----+--+    |       +----+
     |   B   |
     |       |
     +-------+</pre>
</div>
</dd></dl>

<dl class="method">
<dt id="csg.CSG.toPolygons">
<tt class="descname">toPolygons</tt><big>(</big><big>)</big><a class="headerlink" href="#csg.CSG.toPolygons" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="csg.CSG.union">
<tt class="descname">union</tt><big>(</big><em>csg</em><big>)</big><a class="headerlink" href="#csg.CSG.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new CSG solid representing space in either this solid or in the
solid <cite>csg</cite>. Neither this solid nor the solid <cite>csg</cite> are modified.:</p>
<div class="highlight-python"><pre>A.union(B)

+-------+            +-------+
|       |            |       |
|   A   |            |       |
|    +--+----+   =   |       +----+
+----+--+    |       +----+       |
     |   B   |            |       |
     |       |            |       |
     +-------+            +-------+</pre>
</div>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to pycsg&#8217;s documentation!</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/csg.CSG.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="Welcome to pycsg’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">pycsg 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Tim Knip.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>